<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=2,viewport-fit=cover"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><title> - JiangKingåšå®¢</title><meta name="description" content="é˜…è¯»JiangKingåšå®¢ä¸Šçš„ã€Šundefinedã€‹ï¼Œæ¢ç´¢æ›´å¤šæŠ€æœ¯å†…å®¹"><meta name="keywords" content=", undefined, åšå®¢, JiangKing"><meta name="author" content="JiangKing"><meta property="og:title" content="undefined - JiangKingåšå®¢"><meta property="og:description" content="é˜…è¯»JiangKingåšå®¢ä¸Šçš„ã€Šundefinedã€‹ï¼Œæ¢ç´¢æ›´å¤šæŠ€æœ¯å†…å®¹"><meta property="og:type" content="article"><meta property="og:url" content="https://jiangking.com/blog/undefined.html"><meta property="article:published_time" content="undefined"><meta property="article:author" content="JiangKing"><meta name="theme-color" content="#0f0f23"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="preload" href="/css/blog.css" as="style"><link rel="stylesheet" href="/css/blog.css"><style>/* èµ›åšæœ‹å…‹é£æ ¼å˜é‡ */
:root {
  --primary: #6366f1;
  --primary-dark: #4f46e5;
  --secondary: #8b5cf6;
  --accent: #ec4899;
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  --dark: #0f0f23;
  --light: #f8fafc;
  --glass: rgba(255, 255, 255, 0.1);
  --glass-border: rgba(255, 255, 255, 0.2);
  --neon-glow: 0 0 20px rgba(99, 102, 241, 0.8);
  --text: #e2e8f0;
  --text-muted: rgba(226, 232, 240, 0.6);
}

/* äº®è‰²æ¨¡å¼å˜é‡ */
.light-mode {
  --dark: #f8fafc;
  --light: #0f0f23;
  --text: #1e293b;
  --text-muted: rgba(30, 41, 59, 0.7);
  --glass: rgba(0, 0, 0, 0.05);
  --glass-border: rgba(0, 0, 0, 0.1);
}

.light-mode .dynamic-bg {
  background: linear-gradient(45deg, #f8fafc, #e2e8f0, #f8fafc);
}

.light-mode .grid-bg {
  background-image: 
    linear-gradient(rgba(99, 102, 241, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(99, 102, 241, 0.1) 1px, transparent 1px);
}

/* æŒ‰é’®æ¿€æ´»çŠ¶æ€æ ·å¼ */
.action-btn.active {
  color: var(--accent);
  background: rgba(99, 102, 241, 0.2);
  box-shadow: 0 0 10px rgba(99, 102, 241, 0.4);
  transform: translateY(-3px);
}

/* æ”¶è—æŒ‰é’®åŠ¨ç”» */
.bookmark-animation {
  animation: bookmark-pulse 0.5s ease-out;
}

@keyframes bookmark-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

body {
  font-family: 'Helvetica Neue', 'Microsoft Yahei', -apple-system, sans-serif;
  background: var(--dark);
  color: var(--text);
  line-height: 1.6;
  margin: 0;
  padding: 0;
}

/* åŠ¨æ€èƒŒæ™¯ */
.dynamic-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -2;
  background: linear-gradient(45deg, #0f0f23, #1a1a3e, #0f0f23);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ç½‘æ ¼èƒŒæ™¯ */
.grid-bg {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: -1;
  background-image: 
    linear-gradient(rgba(99, 102, 241, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(99, 102, 241, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
}

/* é¼ æ ‡è·Ÿéšå…‰æ•ˆ */
.cursor-glow {
  position: fixed;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
  pointer-events: none;
  transform: translate(-50%, -50%);
  z-index: -1;
  transition: opacity 0.3s;
}

/* è¿›åº¦æ¡ */
.progress-bar {
  position: fixed;
  top: 0;
  left: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--primary), var(--accent));
  z-index: 1000;
  width: 0%;
  transition: width 0.2s;
}

.image-container {
  margin: 20px 0;
  text-align: center;
  position: relative;
}

.image-container img {
  max-width: 100%;
  min-height: 150px;
  border-radius: 8px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  border: 1px solid var(--glass-border);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.image-container img:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 30px rgba(99, 102, 241, 0.4);
}

/* ç‰¹æ®Šæ ·å¼ç”¨äºSVGå›¾ç‰‡ */
.image-container img.svg-image {
  background-color: rgba(255, 255, 255, 0.05);
  padding: 10px;
  border: 1px solid rgba(99, 102, 241, 0.3);
}

.image-container img.error {
  border: 1px dashed var(--danger);
  background-color: rgba(239, 68, 68, 0.1);
}

/* é¡¶éƒ¨å¯¼èˆª */
.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background: rgba(15, 15, 35, 0.8);
  backdrop-filter: blur(10px);
  z-index: 100;
  border-bottom: 1px solid var(--glass-border);
}

.nav-left {
  display: flex;
  align-items: center;
  gap: 15px;
}

.back-btn {
  color: var(--text);
  text-decoration: none;
  font-size: 1.5rem;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: rgba(99, 102, 241, 0.2);
  border: 1px solid rgba(99, 102, 241, 0.3);
  transition: all 0.3s;
}

.back-btn:hover {
  background: rgba(99, 102, 241, 0.4);
  transform: scale(1.1);
}

.site-title {
  font-size: 1.2rem;
  margin: 0;
  background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.nav-right {
  display: flex;
  gap: 10px;
}

.nav-btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 1.2rem;
}

.nav-btn:hover {
  background: rgba(99, 102, 241, 0.2);
  transform: translateY(-2px);
}

/* æ–‡ç« å¤´éƒ¨ */
.article-header {
  position: relative;
  padding: 120px 40px 60px;
  overflow: hidden;
  background: linear-gradient(to bottom, rgba(15, 15, 35, 0) 0%, var(--dark) 100%);
}

.header-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  opacity: 0.4;
}

.header-content {
  position: relative;
  z-index: 1;
  max-width: 900px;
  margin: 0 auto;
}

.article-title {
  font-size: 2.5rem;
  margin-bottom: 20px;
  color: var(--text);
  font-weight: 800;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
  from { text-shadow: 0 0 5px rgba(99, 102, 241, 0.5); }
  to { text-shadow: 0 0 15px rgba(99, 102, 241, 0.8), 0 0 25px rgba(236, 72, 153, 0.6); }
}

.article-meta {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  color: var(--text-muted);
  margin-bottom: 20px;
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 0.9rem;
}

.meta-icon {
  font-size: 1rem;
}

/* æ–‡ç« å®¹å™¨ */
.article-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 30px 40px;
  background: rgba(15, 15, 35, 0.5);
  backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.article-content {
  color: var(--text);
  font-size: 1.1rem;
  line-height: 1.8;
}

/* æ–‡ç« å†…å®¹é£æ ¼ */
.article-content h1,
.article-content h2,
.article-content h3,
.article-content h4,
.article-content h5,
.article-content h6 {
  margin-top: 1.5em;
  margin-bottom: 0.8em;
  color: #fff;
}

.article-content h2 {
  font-size: 1.8rem;
  border-bottom: 2px solid rgba(99, 102, 241, 0.3);
  padding-bottom: 10px;
}

.article-content h3 {
  font-size: 1.5rem;
  color: var(--primary);
}

.article-content p {
  margin: 1.2em 0;
}

.article-content a {
  color: var(--secondary);
  text-decoration: none;
  border-bottom: 1px dashed rgba(139, 92, 246, 0.5);
  transition: all 0.2s;
}

.article-content a:hover {
  color: var(--accent);
  border-color: var(--accent);
}

.article-content blockquote {
  border-left: 4px solid var(--secondary);
  padding-left: 20px;
  margin-left: 0;
  color: var(--text-muted);
  font-style: italic;
}

.article-content code {
  font-family: Monaco, Consolas, 'Courier New', monospace;
  background: rgba(15, 15, 35, 0.6);
  padding: 3px 6px;
  border-radius: 4px;
  font-size: 0.9em;
  border: 1px solid rgba(99, 102, 241, 0.2);
  color: var(--accent);
}

.article-content pre {
  background: rgba(15, 15, 35, 0.8);
  padding: 20px;
  border-radius: 8px;
  overflow-x: auto;
  border: 1px solid var(--primary-dark);
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
}

.article-content pre code {
  background: none;
  padding: 0;
  border: none;
  color: var(--text);
}

/* æ–‡ç« æ ‡ç­¾ */
.article-tags {
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.tag {
  padding: 6px 16px;
  background: rgba(99, 102, 241, 0.2);
  border: 1px solid var(--primary);
  border-radius: 20px;
  font-size: 13px;
  color: var(--primary);
  transition: all 0.3s;
  text-decoration: none;
  display: flex;
  align-items: center;
  position: relative;
  overflow: hidden;
}

.tag:hover {
  background: var(--primary);
  color: #fff;
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
}

/* ä½œè€…ä¿¡æ¯ */
.author-info {
  margin-top: 40px;
  padding: 20px;
  background: rgba(99, 102, 241, 0.1);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 16px;
  display: flex;
  align-items: center;
  gap: 20px;
}

.author-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--primary);
  box-shadow: 0 0 15px rgba(99, 102, 241, 0.5);
}

.author-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.author-details h4 {
  margin: 0 0 5px;
  font-size: 1.2rem;
  color: #fff;
}

.author-bio {
  color: var(--text-muted);
  margin: 0;
  font-size: 0.9rem;
}

/* ç›¸å…³æ–‡ç«  */
.related-posts {
  margin-top: 40px;
}

.section-title {
  font-size: 1.5rem;
  margin-bottom: 20px;
  color: #fff;
  position: relative;
  padding-left: 15px;
}

.section-title::before {
  content: '';
  position: absolute;
  left: 0;
  top: 8px;
  height: 20px;
  width: 4px;
  background: linear-gradient(to bottom, var(--primary), var(--accent));
  border-radius: 2px;
}

.related-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ–æ ·å¼ */
@media (max-width: 768px) {
  .article-header {
    padding: 80px 15px 30px;
  }
  
  .article-title {
    font-size: 1.8rem;
    line-height: 1.3;
  }
  
  .article-meta {
    flex-wrap: wrap;
    gap: 8px;
  }
  
  .article-container {
    padding: 20px 15px;
    margin: 0 10px;
    border-radius: 12px;
  }
  
  .author-info {
    flex-direction: column;
    text-align: center;
    padding: 15px;
  }
  
  .related-grid {
    grid-template-columns: 1fr;
  }
}

/* åº•éƒ¨æ“ä½œæ  */
.article-actions {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 15px;
  background: rgba(15, 15, 35, 0.8);
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(10px);
  padding: 12px 25px;
  border-radius: 50px;
  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
  z-index: 90;
}

.action-btn {
  background: none;
  border: none;
  color: var(--text);
  font-size: 1.2rem;
  cursor: pointer;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s;
}

.action-btn:hover {
  background: rgba(99, 102, 241, 0.2);
  transform: translateY(-3px);
}

.action-divider {
  width: 1px;
  height: 25px;
  background: var(--glass-border);
}

/* ç›®å½•å¯¼èˆª */
.toc {
  position: fixed;
  top: 80px;
  right: -300px;
  width: 280px;
  max-height: calc(100vh - 100px);
  background: rgba(15, 15, 35, 0.8);
  backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 20px;
  transition: right 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  overflow-y: auto;
  box-shadow: -5px 0 20px rgba(0, 0, 0, 0.3);
  z-index: 80;
}

.toc.active {
  right: 20px;
}

.toc-title {
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 1.2rem;
  color: #fff;
  text-align: center;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--glass-border);
}

.toc-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.toc-list li {
  margin-bottom: 10px;
  padding-left: 15px;
  border-left: 2px solid transparent;
  transition: all 0.2s;
}

.toc-list li:hover {
  border-left-color: var(--primary);
}

.toc-list a {
  color: var(--text-muted);
  text-decoration: none;
  display: block;
  padding: 5px 0;
  transition: all 0.2s;
}

.toc-list a:hover {
  color: var(--primary);
}

.toc-list li.active {
  border-left-color: var(--primary);
}

.toc-list li.active a {
  color: var(--primary);
}

@media (max-width: 768px) {
  .toc.active {
    right: 10px;
    width: 240px;
  }
  
  .article-actions {
    padding: 8px 15px;
    bottom: 15px;
  }
  
  .action-btn {
    width: 36px;
    height: 36px;
  }
}</style></head><body><div class="dynamic-bg"></div><div class="grid-bg"></div><div class="cursor-glow" id="cursorGlow"></div><div class="progress-bar" id="progressBar"></div><header class="top-nav" role="banner"><div class="nav-left"><a class="back-btn" href="/blog/" title="è¿”å›é¦–é¡µ" aria-label="è¿”å›åšå®¢é¦–é¡µ">â†</a><h3 class="site-title">JiangKing</h3></div><div class="nav-right"><button class="nav-btn" title="ç›®å½•" aria-label="æŸ¥çœ‹æ–‡ç« ç›®å½•">ğŸ“‘</button><button class="nav-btn" title="æš—è‰²æ¨¡å¼" aria-label="åˆ‡æ¢æš—è‰²æ¨¡å¼">ğŸŒ™</button><button class="nav-btn" title="åˆ†äº«" aria-label="åˆ†äº«æ–‡ç« ">ğŸ”—</button></div></header><section class="article-header"><div class="header-bg"><canvas id="headerCanvas"></canvas></div><div class="header-content"><h1 class="article-title" itemprop="headline"></h1><div class="article-meta"><span class="meta-item"><span class="meta-icon">ğŸ‘¤</span><span itemprop="author"></span></span><span class="meta-item"><span class="meta-icon">ğŸ“…</span><time itemprop="datePublished"></time></span><span class="meta-item"><span class="meta-icon">â±ï¸</span><span>1 min read</span></span><span class="meta-item"><span class="meta-icon">ğŸ‘ï¸</span><span>1.2k</span></span></div></div></section><article class="article-container" itemscope itemtype="https://schema.org/BlogPosting"><meta itemprop="headline"><meta itemprop="author"><meta itemprop="datePublished"><div class="article-content" itemprop="articleBody"></div><section class="article-tags" role="contentinfo" aria-label="æ–‡ç« æ ‡ç­¾"></section><section class="author-info" itemscope itemtype="https://schema.org/Person"><div class="author-avatar"><img src="/assets/avatar.jpg" itemprop="image" loading="lazy"></div><div class="author-details"><h4 itemprop="name"></h4><p class="author-bio" itemprop="description">STDIN | Think >> /dev/Mindâœ¨ - ä¸“æ³¨äºæŠ€æœ¯åˆ†äº«ä¸æ€è€ƒ</p></div></section><section class="related-posts" aria-labelledby="related-posts-title"><h3 class="section-title" id="related-posts-title">ç›¸å…³æ–‡ç« </h3><div class="related-grid" role="feed" aria-label="ç›¸å…³æ–‡ç« åˆ—è¡¨"></div></section></article><div class="article-actions" role="toolbar" aria-label="æ–‡ç« æ“ä½œ"><button class="action-btn" id="likeBtn" title="ç‚¹èµ" aria-label="ç‚¹èµæ–‡ç« "><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg><span class="action-counter">0</span></button><button class="action-btn" id="bookmarkBtn" title="æ”¶è—" aria-label="æ”¶è—æ–‡ç« "><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></svg><span class="action-counter">0</span></button><button class="action-btn" id="commentBtn" title="è¯„è®º" aria-label="æŸ¥çœ‹æˆ–å‘è¡¨è¯„è®º"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg><span class="action-counter">0</span></button><div class="action-divider"></div><button class="action-btn" id="shareBtn" title="åˆ†äº«" aria-label="åˆ†äº«æ–‡ç« "><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"></path></svg></button><button class="action-btn" id="topBtn" title="å›åˆ°é¡¶éƒ¨" aria-label="å›åˆ°é¡µé¢é¡¶éƒ¨"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"></path></svg></button></div><nav class="toc" id="toc" role="navigation" aria-label="æ–‡ç« ç›®å½•"><h4 class="toc-title">ç›®å½•</h4><ul class="toc-list"></ul></nav><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "datePublished": "",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "JiangKing"
  },
  "publisher": {
    "@type": "Organization",
    "name": "JiangKingåšå®¢",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jiangking.com/assets/avatar.jpg"
    }
  },
  "description": "é˜…è¯»JiangKingåšå®¢ä¸Šçš„ã€Šundefinedã€‹ï¼Œæ¢ç´¢æ›´å¤šæŠ€æœ¯å†…å®¹",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jiangking.com/blog/.html"
  }
}
</script><script>// é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
document.addEventListener('DOMContentLoaded', function() {
  console.log('å¼€å§‹å¤„ç†å›¾ç‰‡æ˜¾ç¤ºé—®é¢˜');
  
  // æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒwebpæ ¼å¼
  function checkWebpSupport() {
    const canvas = document.createElement('canvas');
    if (!canvas.getContext || !canvas.getContext('2d')) {
      return false;
    }
    
    return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;
  }
  
  const supportsWebp = checkWebpSupport();
  console.log('æµè§ˆå™¨æ”¯æŒwebpæ ¼å¼:', supportsWebp);

  // 1. å¤„ç†ç›´æ¥æ˜¾ç¤ºä¸ºæ–‡æœ¬çš„å›¾ç‰‡URL (657bf33bfbf478066fd24f11b0eb95f7.webp)
  const allElements = document.querySelectorAll('.article-content *');
  allElements.forEach(el => {
    // æ£€æŸ¥æ˜¯å¦ä¸ºçº¯æ–‡æœ¬å…ƒç´ ä¸”æ–‡æœ¬å†…å®¹åƒå›¾ç‰‡URL
    const content = el.textContent ? el.textContent.trim() : '';
    if (content && (
        content.match(/[a-f0-9]{32}\.webp$/i) ||
        content.match(/\.(webp|jpg|png|gif|jpeg)$/i)
      ) &&
      el.childNodes.length === 1 &&
      el.childNodes[0].nodeType === Node.TEXT_NODE) {
      
      console.log('æ‰¾åˆ°å¯èƒ½æ˜¯å›¾ç‰‡URLçš„æ–‡æœ¬:', content);
      
      // åˆ›å»ºå›¾ç‰‡å®¹å™¨å’Œå›¾ç‰‡å…ƒç´ 
      const imgContainer = document.createElement('div');
      imgContainer.className = 'image-container';
      
      const img = document.createElement('img');
      
      // å°è¯•æ„é€ æ­£ç¡®çš„å›¾ç‰‡è·¯å¾„
      if (content.startsWith('/')) {
        // å·²ç»æ˜¯ç›¸å¯¹è·¯å¾„
        img.src = content;
      } else if (content.match(/[a-f0-9]{32}\.webp$/i) || content.endsWith('.webp')) {
        // çœ‹èµ·æ¥åƒæ˜¯åœ¨å½“å‰æ–‡ç« ç›®å½•ä¸‹çš„webpå›¾ç‰‡
        const articleId = window.location.pathname.split('/').pop().replace('.html', '');
        img.src = `/blog/images/${articleId}/${content}`;
      } else {
        // é»˜è®¤ä½¿ç”¨å ä½å›¾
        img.src = '/assets/placeholder-image.svg';
      }
      
      // æ·»åŠ é”™è¯¯å¤„ç†
      img.alt = 'æ–‡ç« å›¾ç‰‡';
      img.setAttribute('data-original-text', content);
      img.onerror = function() {
        this.onerror = null;
        this.src = '/assets/placeholder-image.svg';
        this.classList.add('error');
      };
      
      imgContainer.appendChild(img);
      
      // æ›¿æ¢å…ƒç´ 
      el.parentNode.replaceChild(imgContainer, el);
    }
  });
  
  // 2. æ£€æŸ¥å›¾ç‰‡å®¹å™¨å†…å®¹
  const imageContainers = document.querySelectorAll('.image-container');
  console.log('æ‰¾åˆ°å›¾ç‰‡å®¹å™¨:', imageContainers.length);
  
  imageContainers.forEach((container) => {
    // æ£€æŸ¥å®¹å™¨æ˜¯å¦åªæœ‰æ–‡æœ¬å†…å®¹
    if (!container.querySelector('img') && container.textContent.trim()) {
      const content = container.textContent.trim();
      console.log('å›¾ç‰‡å®¹å™¨å†…åªæœ‰æ–‡æœ¬:', content);
      
      // æ¸…ç©ºå®¹å™¨
      container.innerHTML = '';
      
      // åˆ›å»ºå›¾ç‰‡å…ƒç´ 
      const img = document.createElement('img');
      
      // å°è¯•æ„é€ æ­£ç¡®çš„å›¾ç‰‡è·¯å¾„
      if (content.match(/[a-f0-9]{32}\.webp$/i) || content.endsWith('.webp')) {
        // webpå›¾ç‰‡
        const articleId = window.location.pathname.split('/').pop().replace('.html', '');
        img.src = `/blog/images/${articleId}/${content}`;
      } else {
        // ä½¿ç”¨å ä½å›¾
        img.src = '/assets/placeholder-image.svg';
      }
      
      // æ·»åŠ é”™è¯¯å¤„ç†
      img.alt = 'æ–‡ç« å›¾ç‰‡';
      img.setAttribute('data-text-content', content);
      img.onerror = function() {
        this.onerror = null;
        this.src = '/assets/placeholder-image.svg';
        this.classList.add('error');
      };
      
      // æ·»åŠ åˆ°å®¹å™¨
      container.appendChild(img);
    }
  });
  
  // 3. å¤„ç†æ‰€æœ‰å›¾ç‰‡åŠ è½½é”™è¯¯
  const images = document.querySelectorAll('img');
  console.log('æ‰¾åˆ°å›¾ç‰‡å…ƒç´ :', images.length);
  
  images.forEach((img) => {
    // æ£€æŸ¥æ˜¯å¦ä¸ºSVGå›¾ç‰‡
    if (img.src.toLowerCase().endsWith('.svg')) {
      console.log('æ£€æµ‹åˆ°SVGå›¾ç‰‡:', img.src);
      img.classList.add('svg-image');
      // SVGå›¾ç‰‡ä¸éœ€è¦é”™è¯¯å¤„ç†
      return;
    }
    
    if (img.complete && img.naturalHeight === 0) {
      // å·²ç»åŠ è½½å¤±è´¥çš„å›¾ç‰‡
      console.log('å›¾ç‰‡å·²åŠ è½½å¤±è´¥:', img.src);
      img.classList.add('error');
      
      // å¦‚æœä¸æ˜¯å ä½å›¾ï¼Œåˆ™æ›¿æ¢ä¸ºå ä½å›¾
      if (!img.src.includes('placeholder-image')) {
        img.setAttribute('data-failed-src', img.src);
        img.src = '/assets/placeholder-image.svg';
        img.classList.add('svg-image'); // æ·»åŠ SVGç±»
      }
    } else {
      // æ·»åŠ åŠ è½½é”™è¯¯å¤„ç†
      img.addEventListener('error', function() {
        console.log('å›¾ç‰‡åŠ è½½å¤±è´¥:', this.src);
        this.classList.add('error');
        
        // å¦‚æœä¸æ˜¯å ä½å›¾ï¼Œåˆ™æ›¿æ¢ä¸ºå ä½å›¾
        if (!this.src.includes('placeholder-image')) {
          this.setAttribute('data-failed-src', this.src);
          this.src = '/assets/placeholder-image.svg';
          this.classList.add('svg-image'); // æ·»åŠ SVGç±»
        }
      });
    }
  });
  
  // é¼ æ ‡è·Ÿéšå…‰æ•ˆ
  setupCursorGlow();
  
  // ç”Ÿæˆæ–‡ç« ç›®å½•
  generateTableOfContents();
  
  // æ·»åŠ é˜…è¯»è¿›åº¦æ¡
  setupProgressBar();
  
  // è®¾ç½®æ–‡ç« å¤´éƒ¨æ•ˆæœ
  setupHeaderEffect();
  
  // æ·»åŠ ä»£ç é«˜äº®
  highlightCodeBlocks();
  
  // ç›®å½•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
  document.querySelector('.nav-btn[title="ç›®å½•"]').addEventListener('click', function() {
    document.getElementById('toc').classList.toggle('active');
  });
  
  // åˆå§‹åŒ–å³ä¸Šè§’å¯¼èˆªæŒ‰é’®åŠŸèƒ½
  const darkModeBtn = document.querySelector('.nav-btn[title="æš—è‰²æ¨¡å¼"]');
  if (darkModeBtn) {
    darkModeBtn.addEventListener('click', function() {
      document.body.classList.toggle('light-mode');
      const isDarkMode = !document.body.classList.contains('light-mode');
      localStorage.setItem('darkMode', isDarkMode ? 'true' : 'false');
      this.innerHTML = isDarkMode ? 'ğŸŒ™' : 'â˜€ï¸';
    });
    
    // ä»localStorageæ¢å¤æš—è‰²æ¨¡å¼çŠ¶æ€
    const isDarkMode = localStorage.getItem('darkMode') !== 'false';
    if (!isDarkMode) {
      document.body.classList.add('light-mode');
      darkModeBtn.innerHTML = 'â˜€ï¸';
    }
  }
  
  // å³ä¸Šè§’åˆ†äº«æŒ‰é’®
  const navShareBtn = document.querySelector('.nav-btn[title="åˆ†äº«"]');
  if (navShareBtn) {
    navShareBtn.addEventListener('click', function() {
      if (navigator.share) {
        navigator.share({
          title: document.title,
          url: window.location.href,
          text: document.querySelector('meta[name="description"]')?.content || document.title
        }).catch(error => {
          console.log('åˆ†äº«å¤±è´¥:', error);
          showShareDialog();
        });
      } else {
        showShareDialog();
      }
    });
  }
  
  // åº•éƒ¨æ“ä½œæŒ‰é’®åŠŸèƒ½
  setupActionButtons();
});

// æ»šåŠ¨åˆ°é¡¶éƒ¨
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// è®¾ç½®é¼ æ ‡è·Ÿéšå…‰æ•ˆ
function setupCursorGlow() {
  const cursorGlow = document.getElementById('cursorGlow');
  if (!cursorGlow) return;
  
  let mouseX = 0, mouseY = 0;
  let currentX = 0, currentY = 0;

  document.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  function animateCursor() {
    currentX += (mouseX - currentX) * 0.1;
    currentY += (mouseY - currentY) * 0.1;
    
    cursorGlow.style.left = currentX + 'px';
    cursorGlow.style.top = currentY + 'px';
    
    requestAnimationFrame(animateCursor);
  }
  animateCursor();
}

// è®¾ç½®é˜…è¯»è¿›åº¦æ¡
function setupProgressBar() {
  const progressBar = document.getElementById('progressBar');
  
  window.addEventListener('scroll', () => {
    const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
    const clientHeight = document.documentElement.clientHeight || window.innerHeight;
    
    const scrollPercentage = (scrollTop / (scrollHeight - clientHeight)) * 100;
    progressBar.style.width = scrollPercentage + '%';
  });
}

// ç”Ÿæˆæ–‡ç« ç›®å½•
function generateTableOfContents() {
  const headings = document.querySelectorAll('.article-content h2, .article-content h3');
  const tocList = document.querySelector('.toc-list');
  
  if (headings.length === 0 || !tocList) return;
  
  headings.forEach((heading, index) => {
    // ä¸ºæ¯ä¸ªæ ‡é¢˜æ·»åŠ ID
    const id = 'heading-' + index;
    heading.id = id;
    
    // åˆ›å»ºç›®å½•é¡¹
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.textContent = heading.textContent;
    link.href = '#' + id;
    
    // æ ¹æ®æ ‡é¢˜å±‚çº§æ·»åŠ ç¼©è¿›
    if (heading.tagName === 'H3') {
      listItem.style.paddingLeft = '10px';
    }
    
    link.addEventListener('click', function(e) {
      e.preventDefault();
      
      document.getElementById(id).scrollIntoView({
        behavior: 'smooth'
      });
      
      // å¦‚æœåœ¨ç§»åŠ¨ç«¯ï¼Œç‚¹å‡»åéšè—ç›®å½•
      if (window.innerWidth <= 768) {
        document.getElementById('toc').classList.remove('active');
      }
    });
    
    listItem.appendChild(link);
    tocList.appendChild(listItem);
  });
  
  // å¦‚æœæ²¡æœ‰æ ‡é¢˜ï¼Œéšè—ç›®å½•æŒ‰é’®
  if (headings.length === 0) {
    document.querySelector('.nav-btn[title="ç›®å½•"]').style.display = 'none';
  }
}

// è®¾ç½®æ–‡ç« å¤´éƒ¨æ•ˆæœ
function setupHeaderEffect() {
  const canvas = document.getElementById('headerCanvas');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = 300;
  
  const particlesArray = [];
  
  // åˆ›å»ºç²’å­
  class Particle {
    constructor() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
      this.size = Math.random() * 2 + 0.5;
      this.speedX = Math.random() * 2 - 1;
      this.speedY = Math.random() * 2 - 1;
      this.color = `rgba(${99 + Math.random() * 30}, ${102 + Math.random() * 20}, ${241 + Math.random() * 14}, ${Math.random() * 0.5 + 0.2})`;
    }
    
    update() {
      this.x += this.speedX * 0.5;
      this.y += this.speedY * 0.5;
      
      if (this.size > 0.1) this.size -= 0.01;
      
      if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
      if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
    }
    
    draw() {
      ctx.fillStyle = this.color;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
  }
  
  // åˆå§‹åŒ–ç²’å­
  function init() {
    for (let i = 0; i < 100; i++) {
      particlesArray.push(new Particle());
    }
  }
  
  // åŠ¨ç”»å¾ªç¯
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    for (let i = 0; i < particlesArray.length; i++) {
      particlesArray[i].update();
      particlesArray[i].draw();
    }
    
    requestAnimationFrame(animate);
  }
  
  init();
  animate();
}

// ä»£ç é«˜äº®ï¼ˆç®€æ˜“ç‰ˆï¼‰
function highlightCodeBlocks() {
  const codeBlocks = document.querySelectorAll('pre code');
  
  codeBlocks.forEach(block => {
    // ç®€å•çš„è¯­æ³•é«˜äº®
    const text = block.innerHTML;
    
    // é«˜äº®å…³é”®å­—
    const keywordsList = ['function', 'return', 'if', 'else', 'for', 'while', 'var', 'let', 'const', 'class', 'import', 'export', 'from', 'await', 'async', 'try', 'catch'];
    const keywords = new RegExp(`\\b(${keywordsList.join('|')})\\b`, 'g');
    
    // é«˜äº®å­—ç¬¦ä¸²
    const strings = /(".*?"|'.*?'|`.*?`)/g;
    
    // é«˜äº®æ³¨é‡Š
    const comments = /(\/\/.*|\/\*[\s\S]*?\*\/)/g;
    
    // åº”ç”¨é«˜äº®
    let highlighted = text
      .replace(comments, '<span style="color: #6b7280;">$1</span>')
      .replace(strings, '<span style="color: #ec4899;">$1</span>')
      .replace(keywords, '<span style="color: #8b5cf6;">$1</span>');
      
    block.innerHTML = highlighted;
  });
}

// æ˜¾ç¤ºåˆ†äº«å¯¹è¯æ¡†
function showShareDialog() {
  alert('å·²å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿ï¼Œå¿«å»åˆ†äº«å§ï¼');
  // å¤åˆ¶é“¾æ¥
  const textArea = document.createElement('textarea');
  textArea.value = window.location.href;
  textArea.style.position = 'fixed';
  textArea.style.opacity = '0';
  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();
  
  try {
    document.execCommand('copy');
  } catch (err) {
    console.error('å¤åˆ¶å¤±è´¥:', err);
  }
  
  document.body.removeChild(textArea);
}

// åœ¨å½“å‰é¡µé¢å†…å®ç°åŠŸèƒ½æŒ‰é’®
function setupActionButtons() {
  console.log('è®¾ç½®é¡µé¢å†…åŠŸèƒ½æŒ‰é’®');
  
  // è·å–å½“å‰æ–‡ç« ID
  const articleId = window.location.pathname.split('/').pop().replace('.html', '');
  console.log('å½“å‰æ–‡ç« ID:', articleId);
  
  // æ˜¾ç¤ºæ¶ˆæ¯æç¤º
  function showToast(message) {
    let toast = document.getElementById('toast');
    if (!toast) {
      toast = document.createElement('div');
      toast.id = 'toast';
      toast.className = 'toast';
      toast.style.position = 'fixed';
      toast.style.bottom = '30px';
      toast.style.left = '50%';
      toast.style.transform = 'translateX(-50%)';
      toast.style.background = 'rgba(99, 102, 241, 0.9)';
      toast.style.color = 'white';
      toast.style.padding = '12px 20px';
      toast.style.borderRadius = '8px';
      toast.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.2)';
      toast.style.transition = 'all 0.3s ease-in-out';
      toast.style.zIndex = '9999';
      toast.style.opacity = '0';
      document.body.appendChild(toast);
    }
    
    toast.textContent = message;
    toast.style.opacity = '1';
    
    setTimeout(() => {
      toast.style.opacity = '0';
    }, 3000);
  }
  
  // ä»localStorageè¯»å–ç”¨æˆ·äº’åŠ¨è®°å½•
  const userInteractions = JSON.parse(localStorage.getItem('blogInteractions') || '{}');
  const articleInteractions = userInteractions[articleId] || {
    liked: false,
    bookmarked: false,
    commentCount: 0,
    likeCount: 0
  };
  
  // ç‚¹èµåŠŸèƒ½
  const likeBtn = document.getElementById('likeBtn');
  if (likeBtn) {
    console.log('æ‰¾åˆ°ç‚¹èµæŒ‰é’®');
    const likeCounter = likeBtn.querySelector('.action-counter');
    // åˆå§‹åŒ–ç‚¹èµè®¡æ•°å’ŒçŠ¶æ€
    let likeCount = parseInt(localStorage.getItem(`like_count_${articleId}`) || '0');
    likeCounter.textContent = likeCount;
    
    // æ¢å¤ç”¨æˆ·ä¹‹å‰çš„ç‚¹èµçŠ¶æ€
    if (articleInteractions.liked) {
      likeBtn.classList.add('active');
    }
    
    likeBtn.addEventListener('click', function() {
      console.log('ç‚¹èµæŒ‰é’®è¢«ç‚¹å‡»');
      if (this.classList.contains('active')) {
        // å–æ¶ˆç‚¹èµ
        likeCount = Math.max(0, likeCount - 1);
        this.classList.remove('active');
        articleInteractions.liked = false;
        showToast('å·²å–æ¶ˆç‚¹èµ');
      } else {
        // æ·»åŠ ç‚¹èµ
        likeCount++;
        this.classList.add('active');
        articleInteractions.liked = true;
        showToast('æ„Ÿè°¢ç‚¹èµ â¤ï¸');
        
        // ç‚¹èµåŠ¨ç”»
        const heart = document.createElement('span');
        heart.innerHTML = 'â¤ï¸';
        heart.style.position = 'absolute';
        heart.style.top = '50%';
        heart.style.left = '50%';
        heart.style.fontSize = '18px';
        heart.style.transform = 'translate(-50%, -50%)';
        heart.style.pointerEvents = 'none';
        heart.style.opacity = '1';
        heart.style.transition = 'all 0.5s';
        this.appendChild(heart);
        
        setTimeout(() => {
          heart.style.opacity = '0';
          heart.style.transform = 'translate(-50%, -100px)';
          setTimeout(() => heart.remove(), 500);
        }, 50);
      }
      
      // æ›´æ–°æ˜¾ç¤ºçš„è®¡æ•°
      likeCounter.textContent = likeCount;
      
      // ä¿å­˜åˆ°localStorage
      localStorage.setItem(`like_count_${articleId}`, likeCount);
      
      // æ›´æ–°ç”¨æˆ·äº¤äº’è®°å½•
      userInteractions[articleId] = articleInteractions;
      localStorage.setItem('blogInteractions', JSON.stringify(userInteractions));
    });
  }
  
  // æ”¶è—åŠŸèƒ½
  const bookmarkBtn = document.getElementById('bookmarkBtn');
  if (bookmarkBtn) {
    console.log('æ‰¾åˆ°æ”¶è—æŒ‰é’®');
    const bookmarkCounter = bookmarkBtn.querySelector('.action-counter');
    // åˆå§‹åŒ–æ”¶è—è®¡æ•°å’ŒçŠ¶æ€
    let bookmarkCount = parseInt(localStorage.getItem(`bookmark_count_${articleId}`) || '0');
    bookmarkCounter.textContent = bookmarkCount;
    
    // æ¢å¤ç”¨æˆ·ä¹‹å‰çš„æ”¶è—çŠ¶æ€
    if (articleInteractions.bookmarked) {
      bookmarkBtn.classList.add('active');
    }
    
    bookmarkBtn.addEventListener('click', function() {
      console.log('æ”¶è—æŒ‰é’®è¢«ç‚¹å‡»');
      if (this.classList.contains('active')) {
        // å–æ¶ˆæ”¶è—
        bookmarkCount = Math.max(0, bookmarkCount - 1);
        this.classList.remove('active');
        articleInteractions.bookmarked = false;
        showToast('å·²å–æ¶ˆæ”¶è—');
      } else {
        // æ·»åŠ æ”¶è—
        bookmarkCount++;
        this.classList.add('active');
        articleInteractions.bookmarked = true;
        showToast('å·²æ·»åŠ åˆ°æ”¶è—');
        
        // æ”¶è—åŠ¨ç”»
        this.classList.add('bookmark-animation');
        setTimeout(() => this.classList.remove('bookmark-animation'), 500);
      }
      
      // æ›´æ–°æ˜¾ç¤ºçš„è®¡æ•°
      bookmarkCounter.textContent = bookmarkCount;
      
      // ä¿å­˜åˆ°localStorage
      localStorage.setItem(`bookmark_count_${articleId}`, bookmarkCount);
      
      // æ›´æ–°ç”¨æˆ·äº¤äº’è®°å½•
      userInteractions[articleId] = articleInteractions;
      localStorage.setItem('blogInteractions', JSON.stringify(userInteractions));
    });
  }
  
  // è¯„è®ºåŠŸèƒ½
  const commentBtn = document.getElementById('commentBtn');
  if (commentBtn) {
    console.log('æ‰¾åˆ°è¯„è®ºæŒ‰é’®');
    commentBtn.addEventListener('click', function() {
      console.log('è¯„è®ºæŒ‰é’®è¢«ç‚¹å‡»');
      showToast('è¯„è®ºåŠŸèƒ½å³å°†ä¸Šçº¿ï¼Œæ•¬è¯·æœŸå¾…ï¼');
    });
  }
  
  // åˆ†äº«åŠŸèƒ½
  const shareBtn = document.getElementById('shareBtn');
  if (shareBtn) {
    console.log('æ‰¾åˆ°åˆ†äº«æŒ‰é’®');
    shareBtn.addEventListener('click', function() {
      console.log('åˆ†äº«æŒ‰é’®è¢«ç‚¹å‡»');
      if (navigator.share) {
        // ä½¿ç”¨åŸç”Ÿåˆ†äº«API
        navigator.share({
          title: document.title,
          url: window.location.href,
          text: document.querySelector('meta[name="description"]')?.content || document.title
        }).catch(error => {
          console.log('åˆ†äº«å¤±è´¥:', error);
          showShareDialog();
        });
      } else {
        // é™çº§ä¸ºå¼¹å‡ºå¼åˆ†äº«å¯¹è¯æ¡†
        showShareDialog();
      }
    });
  }
  
  // å›åˆ°é¡¶éƒ¨åŠŸèƒ½
  const topBtn = document.getElementById('topBtn');
  if (topBtn) {
    console.log('æ‰¾åˆ°å›åˆ°é¡¶éƒ¨æŒ‰é’®');
    topBtn.addEventListener('click', function() {
      console.log('å›åˆ°é¡¶éƒ¨æŒ‰é’®è¢«ç‚¹å‡»');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  }
}</script></body></html>