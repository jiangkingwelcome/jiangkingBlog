function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,n,a,r,s=[],l=!0,h=!1;try{if(a=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(o=a.call(i)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){h=!0,n=e}finally{try{if(!l&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(h)throw n}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var i,o,n,a,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return n=!(o=!0),{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){n=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(n)throw i}}};if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var i;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(i="Object"===(i={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=Array(t);i<t;i++)o[i]=e[i];return o}function ownKeys(t,e){var i,o=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,i)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}var GridAnimation=(()=>_createClass(function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.canvas=t,this.ctx=t.getContext("2d"),this.options=_objectSpread({direction:i.direction||"right",speed:i.speed||1,borderColor:i.borderColor||"rgba(255, 255, 255, 0.05)",squareSize:i.squareSize||40,hoverFillColor:i.hoverFillColor||"rgba(255, 255, 255, 0.6)",hoverShadowColor:i.hoverShadowColor||"rgba(255, 255, 255, 0.3)",transitionDuration:i.transitionDuration||200,trailDuration:i.trailDuration||1e3,specialBlockColor:i.specialBlockColor||"rgba(255, 100, 100, 0.8)",specialHoverColor:i.specialHoverColor||"rgba(100, 255, 100, 0.8)",snakeHeadColor:i.snakeHeadColor||"rgba(255, 255, 255, 0.9)",snakeTailColor:i.snakeTailColor||"rgba(100, 100, 255, 0.3)",snakeGradientStops:i.snakeGradientStops||5,snakeColorDecay:i.snakeColorDecay||.7},i),this.gridOffset={x:0,y:0},this.hoveredSquare=null,this.animationFrame=null,this.currentOpacity=0,this.targetOpacity=0,this.lastTimestamp=0,this.hoverRadius=3,this.trailSquares=new Map,this.specialBlock=null,this.specialBlockTimer=null,this.isSpecialBlockHovered=!1,this.snakeBody=[],this.shouldGrow=!1},[{key:"init",value:function(){var e=this;this.resizeCanvas(),this.setupEventListeners(),this.animate(),isPhone?setTimeout(function(){e.createSpecialBlock()},500):this.createSpecialBlock(),document.addEventListener(visibilityChangeEvent,this.handleVisibilityChange.bind(this))}},{key:"resizeCanvas",value:function(){var e=window.devicePixelRatio||1,t=this.canvas.offsetWidth,i=this.canvas.offsetHeight;this.canvas.width=Math.floor(t*e),this.canvas.height=Math.floor(i*e),this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(i,"px"),this.ctx.scale(e,e)}},{key:"setupEventListeners",value:function(){var t=this;window.addEventListener("resize",function(){return t.resizeCanvas()}),this.canvas.addEventListener("mousemove",function(e){return t.handleMouseMove(e)}),this.canvas.addEventListener("mouseleave",function(){return t.handleMouseLeave()}),isPhone&&void 0!==window.orientation&&window.addEventListener("orientationchange",function(){setTimeout(function(){t.resizeCanvas(),t.createSpecialBlock()},300)})}},{key:"handleMouseMove",value:function(e){var t=this.canvas.getBoundingClientRect(),i=e.clientX-t.left,e=e.clientY-t.top,t=Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize,o=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize,i=Math.floor((i+this.gridOffset.x-t)/this.options.squareSize),t=Math.floor((e+this.gridOffset.y-o)/this.options.squareSize);(null==(e=this.hoveredSquare)?void 0:e.x)===i&&(null==(o=this.hoveredSquare)?void 0:o.y)===t||(this.hoveredSquare&&(this.snakeBody.unshift({x:this.hoveredSquare.x,y:this.hoveredSquare.y}),!this.shouldGrow&&0<this.snakeBody.length&&this.snakeBody.pop(),this.shouldGrow=!1),this.hoveredSquare={x:i,y:t},this.targetOpacity=.6,this.specialBlock&&i===this.specialBlock.x&&t===this.specialBlock.y&&(this.shouldGrow=!0,this.createSpecialBlock()))}},{key:"handleMouseLeave",value:function(){var e,t,i;this.hoveredSquare&&(e=Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize,t=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize,i="".concat(this.hoveredSquare.x,",").concat(this.hoveredSquare.y),this.trailSquares.set(i,{x:this.hoveredSquare.x*this.options.squareSize+e,y:this.hoveredSquare.y*this.options.squareSize+t,opacity:.6})),this.hoveredSquare=null,this.targetOpacity=0}},{key:"createSpecialBlock",value:function(){this.specialBlockTimer&&clearTimeout(this.specialBlockTimer);for(var t,i,e=window.devicePixelRatio||1,o=Math.ceil(this.canvas.width/e/this.options.squareSize),n=Math.ceil(this.canvas.height/e/this.options.squareSize);t=1+Math.floor(Math.random()*(o-2)),i=1+Math.floor(Math.random()*(n-2)),this.snakeBody.some(function(e){return e.x===t&&e.y===i}););this.specialBlock={x:t,y:i,color:this.options.specialBlockColor,initialOffset:_objectSpread({},this.gridOffset)}}},{key:"drawGrid",value:function(){var d=this,e=window.devicePixelRatio||1,u=(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.setTransform(e,0,0,e,0,0),Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize),p=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize;this.ctx.lineWidth=isPhone?1:.5,isPhone&&this.ctx.translate(.5,.5),this.snakeBody.forEach(function(e,t){var i,o,n,a,r,s,l,h,c=Math.round(e.x*d.options.squareSize+u-d.gridOffset.x%d.options.squareSize),e=Math.round(e.y*d.options.squareSize+p-d.gridOffset.y%d.options.squareSize);d.ctx.shadowColor=d.options.hoverShadowColor,d.ctx.shadowBlur=15,d.ctx.shadowOffsetX=0,(d.ctx.shadowOffsetY=0)===t?d.ctx.fillStyle=d.options.snakeHeadColor:(t=Math.pow(d.options.snakeColorDecay,t),o=d.options.snakeHeadColor.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([.\d]+))?\)/),n=d.options.snakeTailColor.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([.\d]+))?\)/),o&&n?(r=parseInt(o[1]),l=parseInt(o[2]),i=parseInt(o[3]),o=o[4]?parseFloat(o[4]):1,a=parseInt(n[1]),s=parseInt(n[2]),h=parseInt(n[3]),n=n[4]?parseFloat(n[4]):1,a=Math.round(r+(a-r)*(1-t)),r=Math.round(l+(s-l)*(1-t)),s=Math.round(i+(h-i)*(1-t)),l=o+(n-o)*(1-t),d.ctx.fillStyle="rgba(".concat(a,", ").concat(r,", ").concat(s,", ").concat(l,")")):(h=Math.max(.2,t),d.ctx.fillStyle="rgba(255, 255, 255, ".concat(h,")"))),d.ctx.fillRect(c,e,d.options.squareSize,d.options.squareSize),d.ctx.shadowColor="transparent",d.ctx.shadowBlur=0});for(var t=u;t<this.canvas.width+this.options.squareSize;t+=this.options.squareSize)for(var i=p;i<this.canvas.height+this.options.squareSize;i+=this.options.squareSize){var o=Math.round(t-this.gridOffset.x%this.options.squareSize),n=Math.round(i-this.gridOffset.y%this.options.squareSize),a=Math.floor((t-u)/this.options.squareSize),r=Math.floor((i-p)/this.options.squareSize);this.specialBlock&&a===this.specialBlock.x&&r===this.specialBlock.y&&(this.ctx.shadowColor="rgba(255, 255, 255, 0.5)",this.ctx.shadowBlur=20,this.ctx.fillStyle=this.specialBlock.color,this.ctx.fillRect(o,n,this.options.squareSize,this.options.squareSize),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0),this.hoveredSquare&&a===this.hoveredSquare.x&&r===this.hoveredSquare.y&&(this.ctx.shadowColor=this.options.hoverShadowColor,this.ctx.shadowBlur=15,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,a=this.options.hoverFillColor.replace("0.6",this.currentOpacity.toString()),this.ctx.fillStyle=a,this.ctx.fillRect(o,n,this.options.squareSize,this.options.squareSize),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0),this.ctx.strokeStyle=this.options.borderColor,this.ctx.strokeRect(o,n,this.options.squareSize,this.options.squareSize)}isPhone&&this.ctx.translate(-.5,-.5);var s=this.ctx.createRadialGradient(this.canvas.width/e/2,this.canvas.height/e/2,0,this.canvas.width/e/2,this.canvas.height/e/2,Math.sqrt(Math.pow(this.canvas.width/e,2)+Math.pow(this.canvas.height/e,2))/2);s.addColorStop(0,"rgba(6, 6, 6, 0)"),s.addColorStop(1,"#060606"),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,this.canvas.width/e,this.canvas.height/e)}},{key:"updateAnimation",value:function(e){var t,i=this,o=(this.lastTimestamp||(this.lastTimestamp=e),e-this.lastTimestamp),n=(this.lastTimestamp=e,this.currentOpacity!==this.targetOpacity&&(e=Math.min(o/this.options.transitionDuration,1),this.currentOpacity=this.currentOpacity+(this.targetOpacity-this.currentOpacity)*e),_createForOfIteratorHelper(this.trailSquares));try{for(n.s();!(t=n.n()).done;){var a=_slicedToArray(t.value,2),r=a[0],s=a[1];s.opacity-=o/this.options.trailDuration,s.opacity<=0&&this.trailSquares.delete(r)}}catch(e){n.e(e)}finally{n.f()}var l,e=window.devicePixelRatio||1,h=Math.max(isPhone?.8*this.options.speed:this.options.speed,0),c=isPhone?Math.round(100*h)/100:h;switch(this.options.direction){case"right":this.gridOffset.x=(this.gridOffset.x-c+this.options.squareSize)%this.options.squareSize;break;case"left":this.gridOffset.x=(this.gridOffset.x+c+this.options.squareSize)%this.options.squareSize;break;case"up":this.gridOffset.y=(this.gridOffset.y+c+this.options.squareSize)%this.options.squareSize;break;case"down":this.gridOffset.y=(this.gridOffset.y-c+this.options.squareSize)%this.options.squareSize;break;case"diagonal":this.gridOffset.x=(this.gridOffset.x-c+this.options.squareSize)%this.options.squareSize,this.gridOffset.y=(this.gridOffset.y-c+this.options.squareSize)%this.options.squareSize}this.specialBlock&&(h=Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize,l=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize,h=Math.round(this.specialBlock.x*this.options.squareSize+h-this.gridOffset.x%this.options.squareSize),l=Math.round(this.specialBlock.y*this.options.squareSize+l-this.gridOffset.y%this.options.squareSize),h<-this.options.squareSize||h>this.canvas.width/e||l<-this.options.squareSize||l>this.canvas.height/e)&&this.createSpecialBlock(),this.drawGrid(),this.animationFrame=requestAnimationFrame(function(e){return i.updateAnimation(e)})}},{key:"animate",value:function(){var t=this;this.animationFrame=requestAnimationFrame(function(e){return t.updateAnimation(e)})}},{key:"handleVisibilityChange",value:function(){document[hiddenProperty]?this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null):this.animationFrame||(this.lastTimestamp=0,this.animate())}},{key:"destroy",value:function(){var t=this;this.animationFrame&&cancelAnimationFrame(this.animationFrame),window.removeEventListener("resize",function(){return t.resizeCanvas()}),this.canvas.removeEventListener("mousemove",function(e){return t.handleMouseMove(e)}),this.canvas.removeEventListener("mouseleave",function(){return t.handleMouseLeave()}),document.removeEventListener(visibilityChangeEvent,this.handleVisibilityChange.bind(this)),isPhone&&void 0!==window.orientation&&window.removeEventListener("orientationchange",function(){})}}]))();function getMoveDirection(e,t,i,o){if(isPhone)return i=i-e,e=o-t,Math.abs(i)<2&&Math.abs(e)<2?DIRECTIONS.UNDIRECTED:-135<=(o=180*Math.atan2(e,i)/Math.PI)&&o<=-45?DIRECTIONS.UP:45<o&&o<135?DIRECTIONS.DOWN:135<=o&&o<=180||-180<=o&&o<-135?DIRECTIONS.LEFT:-45<=o&&o<=45?DIRECTIONS.RIGHT:DIRECTIONS.UNDIRECTED}function loadIntro(){var e;window.hiddenProperty||(window.hiddenProperty="hidden"),document[hiddenProperty]||((e=function(){setTimeout(function(){var e=document.querySelector(".wrap");e&&(e.classList.remove("in"),setTimeout(function(){e.classList.add("in")},50)),setTimeout(function(){var t=document.querySelector(".content-subtitle");if(t&&window.subtitle)try{t.innerHTML="<span>".concat(_toConsumableArray(window.subtitle).join("</span><span>"),"</span>"),t.querySelectorAll("span").forEach(function(e,t){e.style.animation="none",setTimeout(function(){e.style.animation=""},10)})}catch(e){console.log("subtitle处理错误:",e),t&&(t.textContent=window.subtitle||"")}},270)},0)})(),window.introAnimationInterval||(window.introAnimationInterval=setInterval(function(){document[hiddenProperty]||e()},3e4),document.addEventListener(visibilityChangeEvent,function(){document[hiddenProperty]||e()})),loadIntro.loaded=!0)}function switchPage(){var e={intro:document.querySelector(".content-intro")||{style:{}},path:document.querySelector(".shape-wrap path")||{getAttribute:function(){return null}},shape:document.querySelector("svg.shape")||{style:{}}};if("function"!=typeof anime)console.log("anime.js未加载，跳过动画");else{e.shape&&e.shape.style&&(e.shape.style.transformOrigin="50% 0%");try{anime({targets:e.intro,duration:1100,easing:"easeInOutSine",translateY:"-200vh"}),anime({targets:e.shape,scaleY:[{value:[.8,1.8],duration:550,easing:"easeInQuad"},{value:1,duration:550,easing:"easeOutQuad"}]});var t=e.path&&e.path.getAttribute?e.path.getAttribute("pathdata:id"):null;anime({targets:e.path,duration:1100,easing:"easeOutQuad",d:t,complete:function(e){if("undefined"!=typeof canvas&&canvas)try{"undefined"!=typeof animationID&&cancelAnimationFrame(animationID),canvas.parentElement&&canvas.parentElement.removeChild(canvas),canvas=null}catch(e){console.log("清理canvas时出错:",e)}}})}catch(e){console.log("执行动画时出错:",e)}switchPage.switched=!0}}function switchBackToIntro(){if(loadAll.loaded){var e={intro:document.querySelector(".content-intro")||{style:{}},main:document.querySelector(".content-main")||{style:{}},cardInner:document.querySelector(".card-inner")||{style:{}},shape:document.querySelector("svg.shape")||{style:{}}};if("function"!=typeof anime)console.log("anime.js未加载，跳过动画");else{console.log("开始返回intro页面动画");try{e.cardInner&&e.cardInner.classList&&e.cardInner.classList.remove("in"),anime({targets:e.intro,duration:1100,easing:"easeInOutSine",translateY:"0vh"}),anime({targets:e.shape,duration:1100,easing:"easeInOutSine",scaleY:1}),setTimeout(function(){loadAll.loaded=!1,switchPage.switched=!1,loadMain.loaded=!1,"function"==typeof loadIntro&&loadIntro()},1100)}catch(e){console.log("执行返回动画时出错:",e)}}}}function loadMain(){loadMain.loaded||("undefined"==typeof isPhone&&(window.isPhone=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),"undefined"==typeof isQQBrowser&&(window.isQQBrowser=!1),setTimeout(function(){var e=document.querySelector(".card-inner");e&&e.classList.add("in"),setTimeout(function(){try{var e=document.getElementById("gridCanvas");if(e){var t={direction:"diagonal",speed:isPhone?.03:.05,borderColor:isPhone?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.1)",squareSize:isPhone?50:40,hoverFillColor:"rgba(255, 255, 255, 0.8)",hoverShadowColor:"rgba(255, 255, 255, 0.8)",transitionDuration:200,trailDuration:1500,specialBlockColor:"rgba(100, 255, 152, 0.8)",specialHoverColor:"rgba(29, 202, 29, 0.8)",snakeHeadColor:"rgba(255, 255, 255, 0.95)",snakeTailColor:"rgba(218, 231, 255, 0.25)",snakeColorDecay:.85};if("function"==typeof GridAnimation)try{new GridAnimation(e,t).init()}catch(e){console.log("初始化GridAnimation时出错:",e)}else console.log("GridAnimation类未定义")}}catch(e){console.log("加载canvas时出错:",e)}},1100)},400),loadMain.loaded=!0)}function loadAll(){loadAll.loaded||(switchPage(),loadMain(),loadAll.loaded=!0,window.addEventListener("beforeunload",function(){window.introAnimationInterval&&(clearInterval(window.introAnimationInterval),window.introAnimationInterval=null),window.splatsInterval&&(clearInterval(window.splatsInterval),window.splatsInterval=null)}))}window.hiddenProperty="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,window.DIRECTIONS={UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",UNDIRECTED:"UNDIRECTED"},window.isPhone=/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent),window.isQQBrowser=/QQBrowser/i.test(navigator.userAgent),window.hiddenProperty||(window.hiddenProperty="hidden"),window.visibilityChangeEvent=window.hiddenProperty.replace(/hidden/i,"visibilitychange");try{window.addEventListener(window.visibilityChangeEvent,loadIntro)}catch(e){console.log("添加visibilitychange监听器失败:",e),window.addEventListener("visibilitychange",loadIntro)}window.addEventListener("DOMContentLoaded",loadIntro);var enterEl=document.querySelector(".enter");function handleWheelEvent(e){var t=!1,i=!1;void 0!==e.deltaY?(t=0<e.deltaY,i=e.deltaY<0):void 0!==e.wheelDelta?(t=e.wheelDelta<0,i=0<e.wheelDelta):void 0!==e.detail&&(t=0<e.detail,i=e.detail<0),!loadAll.loaded&&t?(console.log("检测到向下滚动，触发进入效果"),loadAll()):loadAll.loaded&&i&&(console.log("检测到向上滚动，返回intro页面"),switchBackToIntro())}enterEl&&(enterEl.addEventListener("click",loadAll),enterEl.addEventListener("touchstart",loadAll));try{document.addEventListener("wheel",handleWheelEvent,{passive:!0}),document.addEventListener("mousewheel",handleWheelEvent,{passive:!0}),document.addEventListener("DOMMouseScroll",handleWheelEvent,{passive:!0})}catch(e){console.log("添加滚轮监听器失败:",e)}var arrowEls=document.querySelectorAll(".arrow");arrowEls.forEach(function(e){e&&(e.addEventListener("click",loadAll),e.addEventListener("mouseenter",loadAll),e.style.cursor="pointer")}),isPhone&&(document.addEventListener("touchstart",function(e){window.startx=e.touches[0].pageX,window.starty=e.touches[0].pageY},{passive:!0}),document.addEventListener("touchend",function(e){var t=e.changedTouches[0].pageX,e=e.changedTouches[0].pageY,t=getMoveDirection(startx,starty,t,e);loadAll.loaded||t!==DIRECTIONS.UP?loadAll.loaded&&t===DIRECTIONS.DOWN&&(console.log("检测到向下滑动，返回intro页面"),switchBackToIntro()):loadAll()},{passive:!0}));